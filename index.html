<!DOCTYPE html>
<html lang="en">
	<head>
        <meta charset="utf-8">
        <title>Immobilien</title>
        <link rel="stylesheet" href="libs/bootstrap/css/bootstrap.min.css">
        <link rel="stylesheet" href="res/css/immobilien.css">

        <!-- ab hier auslagern in js-Datei -->
        <script type="text/javascript"
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC0PvpLCbWVhxSK5JsRibDD75qjcfpfZio">
        </script>
        <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=places&sensor=false&amp;language=de"></script>
        <script type="text/javascript">
            function initialize() {
            var mapOptions = {
                center: new google.maps.LatLng(49.0167, 12.0833),
                zoom: 13,
            };
            var map = new google.maps.Map(document.getElementById("map-canvas"),
                mapOptions);
            }
            google.maps.event.addDomListener(window, 'load', initialize);
        </script>
        <!-- bis hier auslagern in js-Datei -->
        
    </head>

    <body>

        <script src="libs/jquery-2.0.3.min.js"></script>
        <script src="libs/bootstrap/js/bootstrap.min.js"></script>
        <script src="libs/jquery-ui-1.11.0.custom/jquery-ui.js"></script>
        <link rel="stylesheet" href="libs/jquery-ui-1.11.0.custom/jquery-ui.css">
        <link href="res/css/datepicker.css" rel="stylesheet" type="text/css"/>

    	<div id="headline">
    		<h1 id="logo">
    			Mittelbayerische Immobilien
    		</h1>
    		
    	</div>
        
    	<div id="navigation-buttons">
    		<button type="button" class="btn btn-default" id="gesuche-button">			Gesuche
    		</button>
    		<button type="button" class="btn btn-default" id="anbieten-button">			Anbieten
    		</button>
    		<button type="button" class="btn btn-default" id="merkliste-button">		Meine Merkliste
    		</button>
    	</div>

        <div id="selection">
            <div id="input">
                <div id="text-input">
                    <p id="wo-label">Wo?</p>
                    <input id="wo-input" class="inputClass" type="text" placeholder="Stadt eingeben">
                    <p id="was-label">Was?</p>
                    <input id="was-input" class="inputClass" type="text" placeholder="Immboilienart eingeben">
                </div>
                <div id="mieten-kaufen-select">
                    <button type="button" class="btn btn-primary" id="Mieten-Button">Mieten</button>
                    <button type="button" class="btn btn-default" id="Kaufen-Button">Kaufen</button>
                </div>
                <div id="money-controls">
                    Kosten
                    <div id="moneyslider", class="slider"></div>
                    <input id="money-lower-input" class="inputClass moneyInput" data-index="0" value="250">
                    <p class="inputlabel">bis</p>
                    <input id="money-upper-input" class="inputClass moneyInput" data-index="1" value="400">
                </div>
                <div id="rooms-controls">
                    Anzahl der Zimmer
                    <div id="roomsslider", class="slider-"></div>
                    <input id="rooms-lower-input" class="inputClass roomsInput" data-index="0" value="1">
                    <p class="inputlabel">bis</p>
                    <input id="rooms-upper-input" class="inputClass roomsInput" data-index="1" value="4">
                </div>
                <div id="size-controls">
                    Wohnfläche
                    <div id="sizeslider", class="slider-"></div>
                    <input id="size-lower-input" class="inputClass sizeInput" data-index="0" value="20">
                    <p class="inputlabel">bis</p>
                    <input id="size-upper-input" class="inputClass sizeInput" data-index="1" value="100">
                </div>
                <div id="date-controls">
                    <p>Einzugsdatum frühestens: <input type="text" id="datepicker-min" placeholder="Datum eingeben"></p>
                    <p>Einzugsdatum spätestens: <input type="text" id="datepicker-max" placeholder="Datum eingeben"></p>
                </div>
            </div>
            <div id="map-canvas"/>
        </div>

        <script>

        //start of google autocomplete --------

        var input = document.getElementById('wo-input');
        var options = {
            types: ['(cities)'],
            componentRestrictions: {country: 'de'}
        };

        autocomplete = new google.maps.places.Autocomplete(input, options);
        //end of google autocomplete -----

        
        //end of mieten/kaufen ------
        $("#Mieten-Button").click(function() {
            //user clicks on rent-button
            //give user feedback (change button states)
            $("#Mieten-Button").attr('class', 'btn btn-primary');
            $("#Kaufen-Button").attr('class', 'btn btn-default');

            //refresh moneyslider with rent-values
            $("#moneyslider").slider({
                values: [ 250, 400 ],
                step: 10,
                min: 50,
                max: 2000,
                range: true,
                slide: function(event, ui) {
                    for (var i = 0; i < ui.values.length; ++i) {
                        $("input.moneyInput[data-index=" + i + "]").val(ui.values[i]);
                    }
                }
            });

            //refill money-input-fields with the current values of the slider
            $("#money-lower-input").val(250);
            $("#money-upper-input").val(400);
        });

        $("#Kaufen-Button").click(function() {
            //user clicks on buy-button
            //give user feedback (change button states)
            $("#Kaufen-Button").attr('class', 'btn btn-primary');
            $("#Mieten-Button").attr('class', 'btn btn-default');

            //refresh moneyslider with buy-values
            $("#moneyslider").slider({
                values: [ 10000, 250000 ],
                step: 250,
                min: 10000,
                max: 800000,
                range: true,
                slide: function(event, ui) {
                    for (var i = 0; i < ui.values.length; ++i) {
                        $("input.moneyInput[data-index=" + i + "]").val(ui.values[i]);
                    }
                }
            });
            
            //refill money-input-fields with the current values of the slider
            $("#money-lower-input").val(10000);
            $("#money-upper-input").val(250000);
        });
        //end of mieten/kaufen ----------
        
        //start of datepicker -----------
        $(function() {
            $( "#datepicker-min" ).datepicker({
                inline: true,
                showOtherMonths: true,
                dayNamesMin: ['So', 'Mo', 'Di', 'Mi', 'Do', 'Fr', 'Sa'],
                monthNames: ['Januar', 'Februar', 'März', 'April', 'Mai', 'Juni', 'Juli', 'August', 'September', 'Oktober', 'November', 'Dezember'],
                dateFormat: 'dd.mm.yy',
                firstDay: 1,
                changeMonth: true,
                changeYear: true,
                minDate: 0,
                onClose: function( selectedDate ) {
                    $( "#datepicker-max" ).datepicker( "option", "minDate", selectedDate );
                }
            });

            $( "#datepicker-max" ).datepicker({
                inline: true,
                showOtherMonths: true,
                dayNamesMin: ['So', 'Mo', 'Di', 'Mi', 'Do', 'Fr', 'Sa'],
                monthNames: ['Januar', 'Februar', 'März', 'April', 'Mai', 'Juni', 'Juli', 'August', 'September', 'Oktober', 'November', 'Dezember'],
                dateFormat: 'dd.mm.yy',
                firstDay: 1,
                changeMonth: true,
                changeYear: true,
                minDate: 0,
                onClose: function( selectedDate ) {
                    $( "#datepicker-min" ).datepicker( "option", "maxDate", selectedDate );
                }
            });
        });
        //end of datepicker ------------

        //start of sliders -------------
        $("#moneyslider").slider({
            values: [ 250, 400 ],
            step: 10,
            min: 100,
            max: 2000,
            range: true,
            slide: function(event, ui) {
                for (var i = 0; i < ui.values.length; ++i) {
                    $("input.moneyInput[data-index=" + i + "]").val(ui.values[i]);
                }
            }
        });

        $("input.sliderValue").change(function() {
            var $this = $(this);
            $("#moneyslider").slider("values", $this.data("index"), $this.val());
        });

        $("#roomsslider").slider({
            values: [ 1, 4 ],
            step: 1,
            min: 1,
            max: 20,
            range: true,
            slide: function(event, ui) {
                for (var i = 0; i < ui.values.length; ++i) {
                    $("input.roomsInput[data-index=" + i + "]").val(ui.values[i]);
                }
            }
        });

        $("input.sliderValue").change(function() {
            var $this = $(this);
            $("#roomsslider").slider("values", $this.data("index"), $this.val());
        });

        $("#sizeslider").slider({
            values: [ 20, 100 ],
            step: 10,
            min: 10,
            max: 600,
            range: true,
            slide: function(event, ui) {
                for (var i = 0; i < ui.values.length; ++i) {
                    $("input.sizeInput[data-index=" + i + "]").val(ui.values[i]);
                }
            }
        });

        $("input.sliderValue").change(function() {
            var $this = $(this);
            $("#sizeslider").slider("values", $this.data("index"), $this.val());
        });
        //end of sliders ---------------

        //autocomplete for was-input
        $(function() {
            var availableTags = [
                "Haus",
                "Wohnung",
                "Doppelhaushälfte",
                "Grundstück",
                "Garage"
            ];

            $( "#was-input" ).autocomplete({
                source: availableTags,
                minLength: 0
            }).focus(function(){            
                $(this).trigger('keydown.autocomplete');
            });
        });
        </script>
        
        

    	
    </body>


</html>